---
:tests:

  test_capability_rfc3501_6.1.1_example_1:
    :response: "* CAPABILITY IMAP4rev1 STARTTLS AUTH=GSSAPI LOGINDISABLED\r\n"
    :expected: !ruby/struct:Net::IMAP::UntaggedResponse
      name: CAPABILITY
      data:
      - IMAP4REV1
      - STARTTLS
      - AUTH=GSSAPI
      - LOGINDISABLED
      raw_data: "* CAPABILITY IMAP4rev1 STARTTLS AUTH=GSSAPI LOGINDISABLED\r\n"

  test_capability_rfc3501_6.1.1_example_2:
    :response: "* CAPABILITY IMAP4rev1 AUTH=GSSAPI AUTH=PLAIN\r\n"
    :expected: !ruby/struct:Net::IMAP::UntaggedResponse
      name: CAPABILITY
      data:
      - IMAP4REV1
      - AUTH=GSSAPI
      - AUTH=PLAIN
      raw_data: "* CAPABILITY IMAP4rev1 AUTH=GSSAPI AUTH=PLAIN\r\n"

  test_invalid_capability_extra_space_at_end:
    :comment: |
      [Bug #8415]
    :quirky_server: Apple iCloud
    :response: "* CAPABILITY st11p00mm-iscream009 1Q49 XAPPLEPUSHSERVICE IMAP4 IMAP4rev1
      SASL-IR AUTH=ATOKEN AUTH=PLAIN \r\n"
    :expected: !ruby/struct:Net::IMAP::UntaggedResponse
      name: CAPABILITY
      data:
      - ST11P00MM-ISCREAM009
      - 1Q49
      - XAPPLEPUSHSERVICE
      - IMAP4
      - IMAP4REV1
      - SASL-IR
      - AUTH=ATOKEN
      - AUTH=PLAIN
      raw_data: "* CAPABILITY st11p00mm-iscream009 1Q49 XAPPLEPUSHSERVICE IMAP4 IMAP4rev1
        SASL-IR AUTH=ATOKEN AUTH=PLAIN \r\n"

  test_capability_response_code_with_valid_atoms:
    :response: "* OK [CAPABILITY IMAP4rev1 SASL-IR 1234 NIL THIS+THAT + AUTH=PLAIN
      ID] IMAP4rev1 Hello\r\n"
    :expected: !ruby/struct:Net::IMAP::UntaggedResponse
      name: OK
      data: !ruby/struct:Net::IMAP::ResponseText
        code: !ruby/struct:Net::IMAP::ResponseCode
          name: CAPABILITY
          data:
          - IMAP4REV1
          - SASL-IR
          - '1234'
          - NIL
          - THIS+THAT
          - "+"
          - AUTH=PLAIN
          - ID
        text: IMAP4rev1 Hello
      raw_data: "* OK [CAPABILITY IMAP4rev1 SASL-IR 1234 NIL THIS+THAT + AUTH=PLAIN
        ID] IMAP4rev1 Hello\r\n"
